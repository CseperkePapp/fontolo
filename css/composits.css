/* ========================================= */
/* FONTOLO COMPOSITE COMPONENTS             */
/* Multi-part interactive components        */
/* ========================================= */

/* ========================================= */
/* TAB SYSTEM                               */
/* ========================================= */

.tab-controls {
    display: flex;
    gap: var(--space-xs);
    background-color: hsl(var(--background-hue), var(--background-saturation), calc(var(--background-lightness) + 1%));
    padding: var(--space-xs);
    border-radius: var(--border-radius-md);
    border: 1px solid var(--ui-border-color);
    /* NO external margins */
}

.tab-btn {
    padding: var(--space-sm) var(--space-md);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-secondary);
    border: none;
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    transition: all 0.2s ease-out;
    background-color: transparent;
    /* NO external margins */
}

.tab-btn:hover {
    background-color: hsl(var(--background-hue), var(--background-saturation), var(--background-lightness));
    color: var(--color-text-default);
}

.tab-btn.active {
    color: var(--color-primary);
    background-color: white;
    font-weight: var(--font-weight-semibold);
    box-shadow: 0 2px 4px hsla(var(--color-neutral-hue), 20%, 30%, 0.05);
}

/* ========================================= */
/* ACCORDION SYSTEM                         */
/* ========================================= */

.accordion-item {
    border: 1px solid var(--ui-border-color);
    border-left-width: 4px;
    border-radius: var(--border-radius-md);
    overflow: hidden;
    background-color: white;
    transition: border-left-color 0.3s ease;
    /* NO external margins - spacing handled by containers */
}

.accordion-item.primary { border-left-color: var(--color-primary); }
.accordion-item.secondary { border-left-color: var(--color-secondary); }
.accordion-item.accent { border-left-color: var(--color-accent); }
.accordion-item.neutral { border-left-color: var(--color-neutral); }

.accordion-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    padding: var(--space-sm) var(--space-md);
    background-color: transparent;
    border: none;
    cursor: pointer;
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-default);
    font-size: var(--font-size-base);
    text-align: left;
    transition: background-color 0.2s ease;
}

.accordion-header:hover {
    background-color: hsl(var(--background-hue), var(--background-saturation), calc(var(--background-lightness) - 2%));
}

.accordion-header h3 { 
    transition: color 0.2s ease; 
    margin: 0; /* Reset default margins */
    font-size: inherit; 
}

.secondary .accordion-header h3 { color: var(--color-secondary); }
.accent .accordion-header h3 { color: var(--color-accent); }

.accordion-icon {
   transition: transform 0.3s ease, fill 0.3s ease;
   fill: var(--color-text-secondary);
}

.accordion-header.active .accordion-icon {
   transform: rotate(90deg);
}

.accordion-content {
   padding: 0 var(--space-md);
   max-height: 0;
   overflow: hidden;
   transition: max-height 0.4s ease-out, padding 0.4s ease-out;
   background-color: white;
   border-top: 1px solid var(--ui-border-color);
}

.accordion-content.active {
   max-height: 800px;
   padding: var(--space-md);
}

/* ========================================= */
/* CUSTOM SELECT SYSTEM                     */
/* ========================================= */

.custom-select {
   position: relative;
   font-size: var(--font-size-sm);
   /* NO external margins */
}

.select-trigger {
   display: flex;
   align-items: center;
   justify-content: space-between;
   width: 100%;
   padding: var(--space-xs) var(--space-sm);
   border: 1px solid var(--ui-border-color);
   border-radius: var(--border-radius-sm);
   background-color: white;
   cursor: pointer;
   height: 34px;
   transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.select-trigger:focus {
   outline: none;
   border-color: var(--color-primary);
   box-shadow: 0 0 0 3px hsla(var(--color-primary-hue), var(--color-primary-saturation), var(--color-primary-lightness), 0.1);
}

.select-options {
   position: absolute;
   top: calc(100% + 4px);
   left: 0;
   right: 0;
   background-color: white;
   border: 1px solid var(--ui-border-color);
   border-radius: var(--border-radius-sm);
   z-index: 10;
   max-height: 0;
   overflow: hidden;
   opacity: 0;
   transform: translateY(-10px);
   transition: max-height 0.2s ease-out, opacity 0.2s ease-out, transform 0.2s ease-out;
   box-shadow: 0 4px 12px hsla(var(--color-neutral-hue), 20%, 30%, 0.1);
}

.custom-select.open .select-options {
   max-height: 200px;
   opacity: 1;
   transform: translateY(0);
}

.select-option {
   display: flex;
   align-items: center;
   padding: var(--space-sm);
   cursor: pointer;
   transition: background-color 0.2s ease;
}

.select-option:hover {
   background-color: hsl(var(--color-primary-hue), var(--color-primary-saturation), 95%);
}

.select-option.selected {
   background-color: var(--color-primary);
   color: white;
}

/* ========================================= */
/* RANGE SLIDER SYSTEM                      */
/* ========================================= */

.slider {
   width: 100%;
   height: 6px;
   border-radius: 3px;
   background: #e5e7eb;
   outline: none;
   -webkit-appearance: none;
   position: relative;
   /* NO external margins */
}

.slider::-webkit-slider-thumb {
   -webkit-appearance: none;
   appearance: none;
   width: 18px;
   height: 18px;
   border-radius: 50%;
   background: var(--color-primary);
   border: none;
   cursor: pointer;
   transition: all 0.2s ease;
   box-sizing: border-box;
}

.slider::-webkit-slider-thumb:hover {
   transform: scale(1.1);
   box-shadow: 0 0 0 4px hsla(var(--color-primary-hue), var(--color-primary-saturation), var(--color-primary-lightness), 0.2);
}

.slider::-moz-range-thumb {
   width: 18px;
   height: 18px;
   border-radius: 50%;
   background: var(--color-primary);
   border: none;
   cursor: pointer;
   box-sizing: border-box;
}

/* Slider color variants */
.primary .slider::-webkit-slider-thumb { background-color: var(--color-primary); }
.primary .slider::-moz-range-thumb { background-color: var(--color-primary); }
.primary .slider::-webkit-slider-thumb:hover { box-shadow: 0 0 0 4px hsla(var(--color-primary-hue), var(--color-primary-saturation), var(--color-primary-lightness), 0.25); }

.secondary .slider::-webkit-slider-thumb { background-color: var(--color-secondary); }
.secondary .slider::-moz-range-thumb { background-color: var(--color-secondary); }
.secondary .slider::-webkit-slider-thumb:hover { box-shadow: 0 0 0 4px hsla(var(--color-secondary-hue), var(--color-secondary-saturation), var(--color-secondary-lightness), 0.25); }

.accent .slider::-webkit-slider-thumb { background-color: var(--color-accent); }
.accent .slider::-moz-range-thumb { background-color: var(--color-accent); }
.accent .slider::-webkit-slider-thumb:hover { box-shadow: 0 0 0 4px hsla(var(--color-accent-hue), var(--color-accent-saturation), var(--color-accent-lightness), 0.25); }

.slider-value {
   font-size: var(--font-size-xs);
   color: var(--color-text-secondary);
   margin-top: var(--space-xs); /* Internal spacing is OK */
   text-align: right;
}
